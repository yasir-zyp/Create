<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mall4j.cloud.product.mapper.AttrMapper">
  <resultMap id="attrMap" type="com.mall4j.cloud.api.product.vo.AttrVO">
    <id column="attr_id" property="attrId"/>
    <result column="create_time" property="createTime"/>
    <result column="update_time" property="updateTime"/>
    <result column="shop_id" property="shopId"/>
    <result column="category_id_two" property="categoryIdTwo"/>
    <result column="category_id_one" property="categoryIdOne"/>
    <result column="category_id" property="categoryId"/>
    <result column="category_name" property="categoryName"/>
    <result column="name" property="name"/>
    <result column="name_english" property="nameEnglish"  />
    <result column="standard" property="standard"  />
    <result column="standard_name" property="standardName"  />
    <result column="requirement" property="requirement"  />
    <result column="cycle" property="cycle"  />
    <result column="price" property="price"  />
    <result column="desc" property="desc"  />
    <result column="search_type" property="searchType"  />
    <result column="attr_type" property="attrType"  />
  </resultMap>
  <sql id="Vo_Column_List">
    attr_id, create_time, update_time, shop_id, category_id_two, category_id_one, category_id,
    category_name, `name`, name_english, `standard`, standard_name, requirement, `cycle`,
    price, `desc`, search_type, attr_type
  </sql>
  <select id="list" resultMap="attrMap">
        select <include refid="Vo_Column_List"/> from attr
        <where>
          <if test="attr.name != null">
            and name = #{attr.name}
          </if>
          <if test="attr.searchType != null">
            and search_type = #{attr.searchType}
          </if>
          <if test="attr.attrType != null">
            and attr_type = #{attr.attrType}
          </if>
          <if test="attr.shopId != null">
            and shop_id = #{attr.shopId}
          </if>
        </where>
    order by attr_id desc
    limit #{page.begin}, #{page.size}
  </select>
  <select id="countAttr" resultType="java.lang.Long">
    select count(*) from attr
    <where>
        <if test="attr.name != null">
        and name = #{attr.name}
        </if>
        <if test="attr.searchType != null">
        and search_type = #{attr.searchType}
        </if>
      <if test="attr.categoryId != null">
        and category_id = #{attr.categoryId}
      </if>
        <if test="attr.attrType != null">
        and attr_type = #{attr.attrType}
        </if>
        <if test="attr.shopId != null">
        and shop_id = #{attr.shopId}
        </if>
    </where>
  </select>
  <select id="getByAttrId" resultMap="attrMap">
    SELECT * FROM attr
    WHERE attr_id = #{attrId}
  </select>
  <insert id="save">
    insert into attr (`name`,`desc`,`search_type`,`attr_type`,`shop_id`,`category_id`,`category_name`,`name_english`,`cycle`,`price`,`standard`,`standard_name`,`requirement`)
    values (#{attr.name},#{attr.desc},#{attr.searchType},#{attr.attrType},#{attr.shopId},#{attr.categoryId},#{attr.categoryName},#{attr.nameEnglish},#{attr.cycle},#{attr.price},#{attr.standard},#{attr.standardName},#{attr.requirement});
  </insert>
  <update id="update">
    update attr
    set
      <if test="attr.name != null">
        `name` = #{attr.name},
      </if>
      <if test="attr.desc != null">
        `desc` = #{attr.desc},
      </if>
      <if test="attr.searchType != null">
        `search_type` = #{attr.searchType},
      </if>
      <if test="attr.attrType != null">
        `attr_type` = #{attr.attrType},
      </if>
      <if test="attr.shopId != null">
        `shop_id` = #{attr.shopId},
      </if>
    <if test="attr.categoryName != null">
      `category_name` = #{attr.categoryName},
    </if>
    <if test="attr.nameEnglish != null">
      `name_english` = #{attr.nameEnglish},
    </if>
    <if test="attr.cycle != null">
      `cycle` = #{attr.cycle},
    </if>
    <if test="attr.price != null">
      `price` = #{attr.price},
    </if>
    <if test="attr.standard != null">
      `standard` = #{attr.standard},
    </if>
    <if test="attr.standardName != null">
      `standard_name` = #{attr.standardName},
    </if>
    <if test="attr.requirement != null">
      `requirement` = #{attr.requirement},
    </if>
      update_time = NOW()
      where attr_id = #{attr.attrId}
  </update>
  <delete id="deleteById">
    delete from attr where attr_id = #{attrId};
  </delete>
  <insert id="insertSelective" parameterType="com.mall4j.cloud.product.model.Attr" >
    <selectKey resultType="java.lang.Long" keyProperty="attrId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into attr
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
      <if test="shopId != null" >
        shop_id,
      </if>
      <if test="categoryIdTwo != null" >
        category_id_two,
      </if>
      <if test="categoryIdOne != null" >
        category_id_one,
      </if>
      <if test="categoryId != null" >
        category_id,
      </if>
      <if test="categoryName != null" >
        category_name,
      </if>
      <if test="name != null" >
        `name`,
      </if>
      <if test="nameEnglish != null" >
        name_english,
      </if>
      <if test="standard != null" >
        `standard`,
      </if>
      <if test="standardName != null" >
        standard_name,
      </if>
      <if test="requirement != null" >
        requirement,
      </if>
      <if test="cycle != null" >
        `cycle`,
      </if>
      <if test="price != null" >
        price,
      </if>
      <if test="desc != null" >
        `desc`,
      </if>
      <if test="searchType != null" >
        search_type,
      </if>
      <if test="attrType != null" >
        attr_type,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="shopId != null" >
        #{shopId,jdbcType=BIGINT},
      </if>
      <if test="categoryIdTwo != null" >
        #{categoryIdTwo,jdbcType=BIGINT},
      </if>
      <if test="categoryIdOne != null" >
        #{categoryIdOne,jdbcType=BIGINT},
      </if>
      <if test="categoryId != null" >
        #{categoryId,jdbcType=BIGINT},
      </if>
      <if test="categoryName != null" >
        #{categoryName,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="nameEnglish != null" >
        #{nameEnglish,jdbcType=VARCHAR},
      </if>
      <if test="standard != null" >
        #{standard,jdbcType=VARCHAR},
      </if>
      <if test="standardName != null" >
        #{standardName,jdbcType=VARCHAR},
      </if>
      <if test="requirement != null" >
        #{requirement,jdbcType=VARCHAR},
      </if>
      <if test="cycle != null" >
        #{cycle,jdbcType=INTEGER},
      </if>
      <if test="price != null" >
        #{price,jdbcType=BIGINT},
      </if>
      <if test="desc != null" >
        #{desc,jdbcType=VARCHAR},
      </if>
      <if test="searchType != null" >
        #{searchType,jdbcType=TINYINT},
      </if>
      <if test="attrType != null" >
        #{attrType,jdbcType=TINYINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.mall4j.cloud.product.model.Attr" >
    update attr
    <set >
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="shopId != null" >
        shop_id = #{shopId,jdbcType=BIGINT},
      </if>
      <if test="categoryIdTwo != null" >
        category_id_two = #{categoryIdTwo,jdbcType=BIGINT},
      </if>
      <if test="categoryIdOne != null" >
        category_id_one = #{categoryIdOne,jdbcType=BIGINT},
      </if>
      <if test="categoryId != null" >
        category_id = #{categoryId,jdbcType=BIGINT},
      </if>
      <if test="categoryName != null" >
        category_name = #{categoryName,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        `name` = #{name,jdbcType=VARCHAR},
      </if>
      <if test="nameEnglish != null" >
        name_english = #{nameEnglish,jdbcType=VARCHAR},
      </if>
      <if test="standard != null" >
        `standard` = #{standard,jdbcType=VARCHAR},
      </if>
      <if test="standardName != null" >
        standard_name = #{standardName,jdbcType=VARCHAR},
      </if>
      <if test="requirement != null" >
        requirement = #{requirement,jdbcType=VARCHAR},
      </if>
      <if test="cycle != null" >
        `cycle` = #{cycle,jdbcType=INTEGER},
      </if>
      <if test="price != null" >
        price = #{price,jdbcType=BIGINT},
      </if>
      <if test="desc != null" >
        `desc` = #{desc,jdbcType=VARCHAR},
      </if>
      <if test="searchType != null" >
        search_type = #{searchType,jdbcType=TINYINT},
      </if>
      <if test="attrType != null" >
        attr_type = #{attrType,jdbcType=TINYINT},
      </if>
    </set>
    where attr_id = #{attrId,jdbcType=BIGINT}
  </update>

</mapper>
